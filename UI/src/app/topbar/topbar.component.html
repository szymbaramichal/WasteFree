<nav *ngIf="visible" class="topbar" [ngClass]="currentUser.user()?.role == userRole.GarbageAdmin ? 'role-garbadmin' : 'role-user'">
  <div class="topbar-inner">
    <a class="brand link" routerLink="/portal">{{ 'topbar.portalTitle' | translate }}</a>
    <div class="spacer"></div>
    <div class="lang-slot"><app-language-switcher></app-language-switcher></div>
    <div class="inbox-slot">
      <button class="inbox-pill link" (click)="openInbox()" [title]="('topbar.openInbox' | translate)" [ngClass]="{'jiggle': animateInbox}">
        <img src="/assets/images/bell.svg" alt="inbox" width="18" height="18" class="inbox-icon" aria-hidden="true" />
        <span class="inbox-count">{{ inbox.counter() }}</span>
      </button>
    </div>
    <div class="wallet-slot" *ngIf="(walletBalance$ | async) !== null">
      <a class="wallet-pill link" routerLink="/portal/wallet" [title]="('topbar.openWallet' | translate)">
        <img src="/assets/images/wallet.svg" alt="wallet" width="18" height="18" class="wallet-icon"
          aria-hidden="true" />
        <div class="wallet-value ms-2">
          <div class="amount">{{ (walletBalance$ | async) | number:'1.2-2' }}</div>
          <div class="currency">PLN</div>
        </div>
      </a>
    </div>
    <div class="user-info" *ngIf="currentUser.user() as u">
      <span class="logged">{{ 'topbar.hey' | translate }} <strong>{{ u.username }}</strong>! ({{ roleKeyMap[u.role] | translate }})</span>
      <button class="btn-logout" (click)="logout()">{{ 'topbar.logout' | translate }}</button>
    </div>
    <div class="user-info" *ngIf="!currentUser.user()">
      <a class="link" routerLink="/portal">{{ 'topbar.goPortal' | translate }}</a>
    </div>
  </div>
</nav>