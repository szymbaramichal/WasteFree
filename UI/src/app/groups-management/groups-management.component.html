<div class="container py-4 groups-mgmt">
  <div class="row gy-4">
  <div class="col-12">
      <div class="card fancy-card border-0 shadow-lg h-100">
        <div class="card-header bg-gradient-teal text-white py-3 position-relative overflow-hidden">
          <h5 class="mb-1 fw-bold d-flex align-items-center">
            <i class="bi bi-plus-circle"></i>
            {{ 'groups.form.title' | translate }}
          </h5>
          <small class="opacity-75">{{ 'groups.form.subtitle' | translate }}</small>
          <div class="header-accent"></div>
        </div>
        <div class="card-body">
          <form [formGroup]="form" (ngSubmit)="submit()" novalidate class="needs-validation">
            <div class="mb-4">
              <label for="groupName" class="form-label fw-semibold">{{ 'groups.form.name' | translate }}</label>
              <div class="form-group">
                <i class="bi bi-collection"></i>
                <input #groupNameInput id="groupName" type="text" class="form-control" [placeholder]="'groups.form.placeholder.name' | translate" formControlName="groupName" [class.is-invalid]="hasError('groupName','required') || hasError('groupName','maxlength')">
              </div>
              <div class="invalid-feedback d-block" *ngIf="hasError('groupName','required')">{{ 'groups.form.errors.name.required' | translate }}</div>
              <div class="invalid-feedback d-block" *ngIf="hasError('groupName','maxlength')">{{ 'groups.form.errors.name.max' | translate }}</div>
            </div>
            <div class="mb-4">
              <label for="groupDescription" class="form-label fw-semibold">{{ 'groups.form.description' | translate }}</label>
              <textarea id="groupDescription" rows="4" class="form-control" [placeholder]="'groups.form.placeholder.description' | translate" formControlName="groupDescription" [class.is-invalid]="hasError('groupDescription','required') || hasError('groupDescription','maxlength')"></textarea>
              <div class="invalid-feedback" *ngIf="hasError('groupDescription','required')">{{ 'groups.form.errors.desc.required' | translate }}</div>
              <div class="invalid-feedback" *ngIf="hasError('groupDescription','maxlength')">{{ 'groups.form.errors.desc.max' | translate }}</div>
              <div class="form-text text-end small opacity-75 mt-1">{{ form.get('groupDescription')?.value?.length || 0 }}/500</div>
            </div>
            <div class="form-actions d-flex align-items-center gap-3 flex-wrap">
              <button type="submit" class="btn btn-success" [disabled]="submitting || form.invalid">
                <span *ngIf="!submitting" class="d-inline-flex align-items-center"><i class="bi bi-check2-circle"></i> {{ 'groups.form.create' | translate }}</span>
                <span *ngIf="submitting" class="spinner-border spinner-border-sm"></span>
              </button>
              <button type="button" class="btn btn-outline-secondary" (click)="form.reset()" [disabled]="submitting">{{ 'groups.form.reset' | translate }}</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>