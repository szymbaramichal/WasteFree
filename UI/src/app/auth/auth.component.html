<div class="auth-container min-vh-100 d-flex align-items-center justify-content-center">
  <div class="auth-content">
    <ng-container *ngIf="!showActivationSection">
    <h2 *ngIf="isLoginMode">{{ 'auth.login' | translate }}</h2>
    <h2 *ngIf="!isLoginMode">{{ 'auth.register' | translate }}</h2>

    <form *ngIf="isLoginMode" [formGroup]="loginForm" (ngSubmit)="onLogin()">
      <label for="username">{{ 'auth.username' | translate }}</label>
      <input id="username" formControlName="username" type="text" />

      <label for="password">{{ 'auth.password' | translate }}</label>
      <input id="password" formControlName="password" type="password" />

      

      <button type="submit" [disabled]="loginForm.invalid || isLoading">
        <span *ngIf="!isLoading">{{ 'auth.login.btn' | translate }}</span>
        <span *ngIf="isLoading" class="d-flex align-items-center" style="gap:8px;">
          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          <span *ngIf="showLoadingText">{{ 'auth.login.loading' | translate }}</span>
        </span>
      </button>
    </form>

    <form *ngIf="!isLoginMode" [formGroup]="registerForm" (ngSubmit)="onRegister()">

      <label for="username">{{ 'auth.username' | translate }}</label>
      <input id="username" formControlName="username" type="text" />

      <label for="email">{{ 'auth.email' | translate }}</label>
      <input id="email" formControlName="email" type="email" />

      <label for="password">{{ 'auth.password' | translate }}</label>
      <input id="password" formControlName="password" type="password" />

      <label>{{ 'auth.role' | translate }}</label>
      <div class="role-tiles">
        <label class="role-tile" [class.selected]="registerForm.get('role')?.value === 'User'">
          <input type="radio" formControlName="role" value="User" />
          <span class="role-title">{{ 'auth.role.user' | translate }}</span>
          <span class="role-desc">{{ 'auth.role.user.desc' | translate }}</span>
        </label>
        <label class="role-tile" [class.selected]="registerForm.get('role')?.value === 'GarbageAdmin'">
          <input type="radio" formControlName="role" value="GarbageAdmin" />
          <span class="role-title">{{ 'auth.role.garbageAdmin' | translate }}</span>
          <span class="role-desc">{{ 'auth.role.garbageAdmin.desc' | translate }}</span>
        </label>
      </div>

      <label for="reg-language">{{ 'auth.languagePreference' | translate }}</label>
      <div class="language-select">
  <select id="reg-language" formControlName="languagePreference" [attr.aria-label]="'auth.languagePreference' | translate">
          <option value="English">{{ 'language.english' | translate }} ğŸ‡¬ğŸ‡§</option>
          <option value="Polish">{{ 'language.polish' | translate }} ğŸ‡µğŸ‡±</option>
        </select>
        <div class="language-flag">
          <img [src]="(registerForm.get('languagePreference')?.value === 'Polish') ? 'assets/images/flag-pl.svg' : 'assets/images/flag-en.svg'" alt="flag" />
        </div>
      </div>

      <button type="submit" [disabled]="registerForm.invalid || isRegisterLoading">
        <span *ngIf="!isRegisterLoading">{{ 'auth.register.btn' | translate }}</span>
        <span *ngIf="isRegisterLoading" class="d-flex align-items-center" style="gap:8px;">
          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
          <span *ngIf="showRegisterLoadingText">{{ 'auth.register.loading' | translate }}</span>
        </span>
      </button>
    </form>

    <p>
      <a href="#" (click)="toggleMode($event)">
        {{ isLoginMode ? ('auth.toggle.noAccount' | translate) : ('auth.toggle.haveAccount' | translate) }}
      </a>
    </p>

    <div *ngIf="error" class="error">{{ error }}</div>
    </ng-container>
  <ng-container *ngIf="showActivationSection">
    <div class="activation-section">
      <h3>{{ 'auth.account.created.title' | translate }}</h3>
      <p class="activation-text" [innerHTML]="'auth.account.created.desc' | translate"></p>
      <button (click)="returnToLogin()" class="activation-back-btn">{{ 'auth.backToLogin' | translate }}</button>
    </div>
  </ng-container>
  </div>
</div>

