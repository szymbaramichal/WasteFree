<div class="auth-container">
  <ng-container *ngIf="!showActivationSection">
    <h2 *ngIf="isLoginMode">Logowanie</h2>
    <h2 *ngIf="!isLoginMode">Rejestracja</h2>

    <form *ngIf="isLoginMode" [formGroup]="loginForm" (ngSubmit)="onLogin()">
      <label for="username">Nazwa użytkownika</label>
      <input id="username" formControlName="username" type="text" />

      <label for="password">Hasło</label>
      <input id="password" formControlName="password" type="password" />

      <button type="submit" [disabled]="loginForm.invalid">Zaloguj</button>
    </form>

    <form *ngIf="!isLoginMode" [formGroup]="registerForm" (ngSubmit)="onRegister()">

      <label for="username">Nazwa użytkownika</label>
      <input id="username" formControlName="username" type="text" />

      <label for="email">Email</label>
      <input id="email" formControlName="email" type="email" />

      <label for="password">Hasło</label>
      <input id="password" formControlName="password" type="password" />

      <label>Rola</label>
      <div class="role-tiles">
        <label class="role-tile" [class.selected]="registerForm.get('role')?.value === 'User'">
          <input type="radio" formControlName="role" value="User" />
          <span class="role-title">Użytkownik</span>
          <span class="role-desc">Możesz dołączać do grup i zgłaszać wywozy</span>
        </label>
        <label class="role-tile" [class.selected]="registerForm.get('role')?.value === 'GarbageAdmin'">
          <input type="radio" formControlName="role" value="GarbageAdmin" />
          <span class="role-title">Zarządca odpadów</span>
          <span class="role-desc">Możesz wywozić odpady</span>
        </label>
      </div>

      <button type="submit" [disabled]="registerForm.invalid">Zarejestruj</button>
    </form>

    <p>
      <a href="#" (click)="toggleMode($event)">
        {{ isLoginMode ? 'Nie masz konta? Zarejestruj się' : 'Masz już konto? Zaloguj się' }}
      </a>
    </p>

    <div *ngIf="error" class="error">{{ error }}</div>
  </ng-container>
  <ng-container *ngIf="showActivationSection">
  <h3 style="color:var(--primary-green-dark);margin-bottom:18px;font-size:1.22rem;font-weight:700;text-align:center;">Konto utworzone!</h3>
    <p style="color:#2e8b57;font-size:1.05rem;margin-bottom:22px;text-align:center;">Na podany adres e-mail zostanie wysłany link aktywacyjny.<br>Proszę sprawdź skrzynkę pocztową i kliknij w link, aby aktywować konto.</p>
    <button (click)="returnToLogin()" style="padding:10px 28px;background:linear-gradient(90deg, var(--primary-green), var(--primary-green-dark));color:var(--white);border:none;border-radius:8px;font-size:1.08rem;font-weight:700;cursor:pointer;transition:background 0.18s, box-shadow 0.18s, transform 0.13s;box-shadow:0 2px 12px 0 rgba(60,179,113,0.13);">Wróć do logowania</button>
  </ng-container>
</div>

