.topbar {
  width: 100%;
  box-shadow: 0 2px 8px rgba(0,0,0,0.06);
  position: sticky;
  top: 0;
  z-index: 1500;
  min-height: var(--topbar-height);
}
.topbar-inner { /* now container-fluid */
  display:flex;
  align-items:center;
  padding:6px 18px;
  color: #fff;
}
.brand {
  font-weight:700;
}
.spacer { flex: 1 1 auto; }
.lang-slot { margin-right: 12px; }
.user-info { display:flex; align-items:center; gap:12px; }
.user-pill { display:inline-flex; align-items:center; gap:10px; padding:6px 8px; background: var(--topbar-contrast); border-radius: 999px; color:#fff; }
.user-pill .user-avatar-img { width:36px; height:36px; border-radius:50%; object-fit:cover; border:2px solid rgba(255,255,255,0.6); box-shadow:0 4px 10px rgba(0,0,0,0.18); }
.user-pill .user-avatar-fallback { width:36px; height:36px; border-radius:50%; display:flex; align-items:center; justify-content:center; font-weight:700; font-size:0.95rem; background:rgba(255,255,255,0.18); box-shadow:0 4px 10px rgba(0,0,0,0.18); }
.user-pill .user-text { display:flex; flex-direction:column; line-height:1; text-align:left; }
.user-pill .name { font-size:0.9rem; font-weight:700; }
.user-pill .role { font-size:0.65rem; opacity:0.9; }
.user-pill .logout-btn { padding:2px 8px; border-color: rgba(255,255,255,0.6); }
.user-pill .logout-btn:hover { background: rgba(255,255,255,0.12); border-color: rgba(255,255,255,0.85); }

@media (max-width: 575.98px) {
  .user-pill { padding:4px 6px; gap:6px; }
  .user-pill .user-avatar-img,
  .user-pill .user-avatar-fallback { width:30px; height:30px; font-size:0.85rem; }
  .user-pill .name { font-size:0.85rem; }
  .user-pill .role { display:none; }
}
/* legacy custom logout button (replaced with .btn classes but keep fallback) */
.btn-logout {
  background: rgba(255,255,255,0.12);
  border: none;
  padding:6px 10px;
  color: #fff;
  border-radius:6px;
  cursor:pointer;
}
.btn-logout:hover { background: rgba(255,255,255,0.18); }

/* role colors */
.role-user { background: linear-gradient(90deg,var(--primary-green),var(--primary-green-dark)); }
.role-garbadmin { background: linear-gradient(90deg,var(--primary-green-dark),#3ea8a8); }

.logged { font-size:0.95rem; }
.link { color: #fff; text-decoration: none; }

.wallet-slot { display:flex; align-items:center; margin-right:8px; }
.wallet-pill { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; background: var(--topbar-contrast); border-radius:20px; color: #fff; text-decoration:none; font-weight:600; }
.wallet-pill svg { opacity:0.95; }
.wallet-pill:hover { background: rgba(255,255,255,0.12); }

.wallet-icon { display:block; width:18px; height:18px; object-fit:contain; filter:invert(1) brightness(1.2); }
.wallet-value { display:flex; flex-direction:column; line-height:1; text-align:left; }
.wallet-value .amount { font-size:0.95rem; font-weight:700; }
.wallet-value .currency { font-size:0.65rem; opacity:0.9; margin-top:1px; }

@media (max-width: 520px) {
  .wallet-value .currency { display:none; }
  .wallet-value .amount { font-size:0.9rem; }
}

/* Make the language switcher button white on the portal topbar */
.topbar .lang-slot .btn { 
  color: #fff; 
  background: transparent; 
  border-color: rgba(255,255,255,0.6);
}
.topbar .lang-slot .btn:hover { 
  color: #fff; 
  background: rgba(255,255,255,0.12); 
  border-color: rgba(255,255,255,0.85);
}
.topbar .lang-slot .btn:focus { 
  color: #fff; 
  box-shadow: 0 0 0 .15rem rgba(255,255,255,0.25);
}

.inbox-slot { display:flex; align-items:center; margin-right:8px; }
.inbox-pill { display:inline-flex; align-items:center; justify-content:center; position:relative; width:40px; height:36px; padding:6px; background: var(--topbar-contrast); border-radius:20px; color: #fff; text-decoration:none; font-weight:600; border:none; cursor:pointer; }
.inbox-pill:hover { background: rgba(255,255,255,0.12); }
.inbox-icon { width:18px; height:18px; filter: invert(1) brightness(1.2); }
.inbox-count { position:absolute; top:4px; right:6px; min-width:7px; height:14px; padding:0 4px; background:#ff4d4f; color:#fff; border-radius:10px; font-size:0.65rem; display:inline-flex; align-items:center; justify-content:center; font-weight:700; }

.inbox-pill.jiggle { animation: jiggle 1.2s ease-in-out; }
@keyframes jiggle {
  0% { transform: rotate(0deg); }
  15% { transform: rotate(-18deg); }
  30% { transform: rotate(12deg); }
  45% { transform: rotate(-8deg); }
  60% { transform: rotate(6deg); }
  75% { transform: rotate(-4deg); }
  100% { transform: rotate(0deg); }
}

/* Bootstrap navbar overrides */
.navbar-nav .nav-link { color:#fff; }
.navbar-nav .nav-link.active, .navbar-nav .nav-link:focus, .navbar-nav .nav-link:hover { color:#fff; opacity:0.85; }

.navbar-toggler { border-color: rgba(255,255,255,0.55); }
.navbar-toggler:focus { box-shadow: 0 0 0 .15rem rgba(255,255,255,0.35); }
.navbar-toggler-icon { filter: invert(1) brightness(2); }

/* Collapse spacing adjustments */
.navbar .wallet-slot, .navbar .inbox-slot, .navbar .lang-slot, .navbar .user-info { margin-right:0; }
.navbar .collapse.show .user-info { margin-top: .5rem; }

@media (max-width: 991.98px) {
  .navbar-nav { margin-top:.75rem; }
  .wallet-slot, .inbox-slot, .lang-slot { order:0; }
  .user-info { width:100%; justify-content:flex-start; }
  .logged { display:none; }
}
