<ng-template #portalSidebarNav>
	<ul class="nav nav-pills flex-column p-2">
		<li class="nav-item">
			<a class="nav-link" routerLink="/portal" [routerLinkActiveOptions]="{exact: true}" routerLinkActive="active">
				<img src="/assets/images/home.svg" alt="" class="nav-icon" aria-hidden="true" />
				<span class="nav-text">{{ 'menu.dashboard' | translate }}</span>
			</a>
		</li>

		<li class="nav-item">
			<a class="nav-link" routerLink="/portal/wallet" routerLinkActive="active">
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="nav-icon" aria-hidden="true" focusable="false">
				  <path stroke-linecap="round" stroke-linejoin="round" d="M21 12a2.25 2.25 0 0 0-2.25-2.25H15a3 3 0 1 1-6 0H5.25A2.25 2.25 0 0 0 3 12m18 0v6a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 18v-6m18 0V9M3 12V9m18 0a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 9m18 0V6a2.25 2.25 0 0 0-2.25-2.25H5.25A2.25 2.25 0 0 0 3 6v3" />
				</svg>
				<span class="nav-text">{{ 'menu.wallet' | translate }}</span>
			</a>
		</li>

		<li class="nav-item" *appShowForRoles="[userRole.User, userRole.Admin]">
			<a class="nav-link" routerLink="/portal/pickup-order" routerLinkActive="active">
				<img src="/assets/images/pickup.svg" alt="" class="nav-icon nav-icon--pickup" aria-hidden="true" />
				<span class="nav-text">{{ 'menu.pickupOrder' | translate }}</span>
			</a>
		</li>

		<li class="nav-item" *appShowForRoles="[userRole.User, userRole.Admin]">
			<a class="nav-link" routerLink="/portal/my-pickups" routerLinkActive="active">
				<img src="/assets/images/pickup.svg" alt="" class="nav-icon nav-icon--pickup" aria-hidden="true" />
				<span class="nav-text">{{ 'menu.myPickups' | translate }}</span>
			</a>
		</li>

		<li class="nav-item" *appShowForRoles="[userRole.User, userRole.Admin]">
			<a href="#" role="button" class="nav-link" (click)="toggleGroups($event)" [class.active]="groupsRouteActive" [attr.aria-expanded]="groupsExpanded">
				<img src="/assets/images/groups.svg" alt="" class="nav-icon" aria-hidden="true" />
				<span class="nav-text">{{ 'menu.groups' | translate }}</span>
			</a>

			<ul class="nav flex-column ms-4" *ngIf="groupsExpanded">
				<li class="nav-item">
					<a class="nav-link" routerLink="/portal/groups" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
						<span class="nav-text">{{ 'menu.groups.my' | translate }}</span>
					</a>
				</li>
				<li class="nav-item">
					<a class="nav-link" routerLink="/portal/groups/manage" routerLinkActive="active">
						<span class="nav-text">{{ 'menu.groups.joinCreate' | translate }}</span>
					</a>
				</li>
			</ul>
		</li>

		<li class="nav-item mt-auto">
			<a class="nav-link" routerLink="/portal/profile" routerLinkActive="active">
				<img src="/assets/images/user.svg" alt="" class="nav-icon" aria-hidden="true" />
				<span class="nav-text">{{ 'menu.profile' | translate }}</span>
			</a>
		</li>
	</ul>
</ng-template>

<div class="d-flex portal-layout">
	<aside class="portal-sidebar bg-light border-end portal-sidebar--garbageadmin" *appShowForRoles="userRole.GarbageAdmin">
		<ng-container *ngTemplateOutlet="portalSidebarNav"></ng-container>
	</aside>

	<aside class="portal-sidebar bg-light border-end" *ngIf="currentUser.user()?.role !== userRole.GarbageAdmin">
		<ng-container *ngTemplateOutlet="portalSidebarNav"></ng-container>
	</aside>

	<section class="portal-content flex-grow-1">
		<div class="p-3">
			<router-outlet></router-outlet>
		</div>
	</section>
</div>

<app-garbage-admin-consent-modal
	[visible]="consentVisible"
	[loading]="consentLoading"
	[acceptLoading]="consentAccepting"
	[consentText]="consentContent"
	[error]="consentError"
	(accept)="onConsentAccept()"
	(reject)="onConsentReject()"
	(retry)="onConsentRetry()"
></app-garbage-admin-consent-modal>
