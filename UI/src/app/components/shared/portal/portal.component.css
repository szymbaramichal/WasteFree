/* Main portal flex wrapper (content sits to the right of fixed sidebar) */
.portal-layout { 
	height: calc(100dvh - var(--topbar-height, 56px) - 1px);
	min-height: calc(100dvh - var(--topbar-height, 56px) - 1px);
	position: relative; 
	display: flex; 
	flex-direction: row; 
	width: calc(100% - 240px); /* avoid pushing content out of viewport */
	margin-left: 240px; /* reserve space for fixed sidebar */
}

/* Fixed (stable) sidebar width */
/* Fixed sidebar: independent of main scroll */
.portal-sidebar {
	position: fixed;
	top: var(--topbar-height, 56px);
	left: 0;
	bottom: 0;
	width: 240px;
	flex: 0 0 240px;
	max-width: 240px;
	box-shadow: 0 2px 12px rgba(0,0,0,0.06);
	overflow: hidden;
	display:flex;
	flex-direction: column;
	padding-top: 5px; /* breathing room under topbar */
}
.portal-sidebar.bg-light {
	background:
		radial-gradient(circle at 18% 0%, rgba(43, 182, 115, 0.10), transparent 40%),
		radial-gradient(circle at 82% 100%, rgba(31, 139, 86, 0.08), transparent 42%),
		linear-gradient(180deg, rgba(246, 255, 251, 0.70), rgba(236, 252, 245, 0.58));
	-webkit-backdrop-filter: saturate(160%) blur(12px);
	backdrop-filter: saturate(160%) blur(12px);
	border-right: 1px solid rgba(31, 139, 86, 0.15);
}

.portal-sidebar .nav-link {
	color: #1f2d3a;
	border-radius: 8px;
	margin: 4px 8px;
	transition: background-color .18s ease, color .18s ease;
	display: flex;
	align-items: center;
	padding: 0.75rem 0.9rem;
	gap: 0.75rem;
}
.portal-sidebar .nav-link:hover {
	background-color: rgba(43, 182, 115, 0.14);
	color: #14212b;
}
.portal-sidebar .nav-link.active {
	background-color: var(--primary-green, #2bb673);
	color: #fff;
}
.portal-sidebar .nav-link.active:hover {
	background-color: var(--primary-green-dark, #1f8b56);
}

.portal-sidebar.portal-sidebar--garbageadmin .nav-link.active {
	background-color: #3ea8a8;
	color: #fff;
}

.portal-sidebar.portal-sidebar--garbageadmin .nav-link.active:hover {
	background-color: #3296a6;
}


/* Sidebar nav uses flex so the last item (profile) can sit at bottom via mt-auto */
.portal-sidebar .nav { display:flex; flex-direction: column; flex:1 1 auto; overflow: hidden; }

/* Main content area scrolls; sized to viewport minus topbar */
.portal-content { 
	flex: 1 1 auto; 
	min-width: 0; /* allow flexbox to shrink without overflow */
	min-height: calc(100dvh - var(--topbar-height, 56px) - 1px);
	height: calc(100dvh - var(--topbar-height, 56px) - 1px);
	width: 100%;
	overflow-y: auto; 
	-webkit-overflow-scrolling: touch; 
	scrollbar-gutter: stable both-edges; /* prevent layout shift when scrollbar appears */
}

/* Keep internal nav tidy */
.portal-sidebar .nav { padding-bottom: 0; }

/* Responsive: collapse to top bar on smaller screens */
@media (max-width: 991.98px) { /* Bootstrap lg breakpoint */
	.portal-layout { flex-direction: column; margin-left: 0; width: 100%; min-height: auto; }
	.portal-sidebar { 
		position: static; 
		flex: 0 0 auto; 
		width: 100%; 
		max-width: none; 
		bottom: auto; 
		height: auto; 
		overflow: visible; 
	}
}

/* Icon + text alignment */
.portal-sidebar .nav-icon {
	width: 24px;
	height: 24px;
	margin-right: 0;
	display: inline-block;
	object-fit: contain;
}
/* Only invert bitmap/svg image tags; inline SVG inherits currentColor */
.portal-sidebar .nav-link.active img.nav-icon {
	filter: brightness(0) invert(1);
}
.portal-sidebar .nav-text {
	line-height: 1.2;
	font-size: 0.98rem;
	font-weight: 600;
}
