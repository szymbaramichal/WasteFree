<div class="inbox container py-4">
	<div class="row justify-content-center">
		<div class="col-12 col-lg-10">
			<div class="inbox-card card border-0 shadow-lg">
				<div class="inbox-card__header gradient-groups text-white">
					<div class="inbox-icon-wrap d-inline-flex align-items-center justify-content-center">
						<img src="/assets/images/bell.svg" alt="" width="20" height="20" />
					</div>
					<div class="inbox-card__titles">
						<h4 class="m-0 fw-semibold">{{ 'inbox.title' | translate }}</h4>
					</div>
					<div class="ms-auto d-flex align-items-center gap-2" *ngIf="notifications().length">
						<span class="badge inbox-badge">{{ notifications().length }}</span>
						<button type="button" class="btn btn-sm btn-light inbox-clear" (click)="clearAll()" [disabled]="loading()">
							<i class="bi bi-trash3"></i>
							<span class="d-none d-sm-inline">{{ 'inbox.clearAll' | translate }}</span>
						</button>
					</div>
					<div class="header-accent"></div>
				</div>
				<div class="inbox-card__body p-3 p-md-4">
					<!-- Empty state -->
					<div class="inbox-empty text-muted text-center py-5" *ngIf="!notifications().length">
						<img src="/assets/images/bell.svg" alt="" class="inbox-empty__img mb-3" width="28" height="28" />
						<p class="mb-0 fw-semibold">{{ 'inbox.empty' | translate }}</p>
					</div>

					<!-- Notifications list -->
					<ul class="list-group inbox-list" *ngIf="notifications().length">
						<li class="list-group-item notification-item" *ngFor="let n of notifications(); trackBy: trackById">
							<button type="button" class="btn-close notification-close" (click)="dismiss(n)" [attr.aria-label]="'common.cancel' | translate"></button>
							<div class="notification-content">
								<div class="notification-meta">
									<strong>{{ n.title }}</strong>
									<span class="notification-date">{{ formatLocalDate(n.createdDateUtc) }}</span>
								</div>
								<p class="notification-message" [innerHTML]="getMessage(n)"></p>
								<div class="notification-actions">
									<button class="btn btn-outline-success btn-xs" type="button" (click)="accept(n)">
										<span class="d-inline-flex align-items-center gap-1">
											<i class="bi bi-check2"></i>
											{{ 'groups.invitations.accept' | translate }}
										</span>
									</button>
									<button class="btn btn-outline-danger btn-xs" type="button" (click)="decline(n)">
										<span class="d-inline-flex align-items-center gap-1">
											<i class="bi bi-x-circle"></i>
											{{ 'groups.invitations.decline' | translate }}
										</span>
									</button>
								</div>
							</div>
						</li>
					</ul>

					<!-- Pagination controls -->
					<div class="inbox-pagination d-flex align-items-center justify-content-between mt-3" *ngIf="(totalPages() ?? 1) > 1">
						<div class="d-flex align-items-center gap-2">
							<button class="btn btn-sm btn-outline-secondary" (click)="prevPage()" [disabled]="pageNumber()<=1">
								<i class="bi bi-chevron-left"></i>
							</button>
							<span class="small fw-semibold">Page {{ pageNumber() }} / {{ totalPages() }}</span>
							<button class="btn btn-sm btn-outline-secondary" (click)="nextPage()" [disabled]="pageNumber()>=totalPages()">
								<i class="bi bi-chevron-right"></i>
							</button>
						</div>
						<div class="d-flex align-items-center gap-2">
							<label class="small text-muted">Page size</label>
							<select class="form-select form-select-sm" style="width:auto" [value]="pageSize()" (change)="setPageSize(+$any($event.target).value)">
								<option value="5">5</option>
								<option value="10">10</option>
								<option value="20">20</option>
								<option value="50">50</option>
							</select>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
