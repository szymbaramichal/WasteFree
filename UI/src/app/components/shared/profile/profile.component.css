.detail-item--editable {
  position: relative;
  padding-top: 1.6rem;
}

.detail-edit {
  position: absolute;
  top: .75rem;
  right: .75rem;
  width: 34px;
  height: 34px;
  border-radius: 50%;
  border: 1px solid rgba(31,139,86,0.28);
  background: rgba(255,255,255,0.9);
  color: #1f8b56;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: transform .2s ease, background .2s ease, color .2s ease, border-color .2s ease;
}

.detail-edit:hover { background: rgba(31,139,86,0.12); border-color: rgba(31,139,86,0.42); transform: translateY(-1px); }
.detail-edit:focus-visible { outline: 3px solid rgba(31,139,86,0.35); outline-offset:2px; }
.detail-edit svg { width: 18px; height: 18px; }

.profile-container { max-width: 1080px; margin-inline: auto; }

.profile-page {
  background: radial-gradient(1200px 600px at 8% -12%, rgba(43,182,115,0.12), transparent 62%),
              radial-gradient(1200px 600px at 112% 112%, rgba(25,135,84,0.08), transparent 60%);
  padding-bottom: 2rem;
}

.page-title { color: #0f172a; }

.bg-gradient-teal { background: linear-gradient(135deg,#20c997,#198754); }

.profile-shell {
  border-radius: 1.5rem;
  border: 1px solid rgba(32,201,151,0.18);
  overflow: hidden;
  background: linear-gradient(160deg, rgba(255,255,255,0.97), rgba(236,253,245,0.88));
  box-shadow: 0 24px 46px rgba(23,70,90,0.14);
  backdrop-filter: saturate(120%) blur(6px);
}

.profile-shell .card-header {
  border: none;
  padding: 1.2rem 1.5rem;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 1.25rem;
  position: relative;
  z-index: 1;
}

.profile-heading { display: flex; align-items: center; gap: 1rem; }

.profile-heading__icon {
  width: 2.65rem;
  height: 2.65rem;
  border-radius: 0.9rem;
  background: rgba(255,255,255,0.22);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 14px 28px rgba(0,0,0,0.2);
}

.profile-shell .card-title {
  font-size: 1.5rem;
  font-weight: 700;
  color: #fff;
}

.profile-card-header .btn-ghost { color:#fff; border-color: rgba(255,255,255,0.6); }
.profile-card-header .btn-ghost:hover { background: rgba(255,255,255,0.1); color:#fff; }
.profile-card-header .btn-ghost:disabled,
.profile-card-header .btn-ghost[disabled] { color: rgba(255,255,255,0.85); opacity: 0.9; }

.header-accent { position:absolute; inset:0; pointer-events:none; }
.header-accent::after {
  content:"";
  position:absolute;
  top:-40%;
  right:-20%;
  width:220px;
  height:220px;
  background:radial-gradient(circle at center,rgba(255,255,255,0.35),transparent 70%);
  filter:blur(4px);
}

.profile-card-body {
  padding: clamp(2.4rem, 5vw, 3.25rem) clamp(1.5rem, 6vw, 3rem) clamp(2.5rem, 6vw, 3.5rem);
  background: linear-gradient(180deg, rgba(255,255,255,0.94), rgba(255,255,255,0.98));
  position: relative;
}

.profile-hero {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.6rem;
  margin-top: -2.5rem;
  margin-bottom: 1.65rem;
  text-align: center;
}

.avatar-wrapper { position: relative; display: flex; flex-direction: column; align-items: center; gap: .4rem; }

.profile-avatar {
  padding: 0;
  border-radius: 50%;
  background: transparent;
  box-shadow: none;
}

.avatar-img {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  object-fit: cover;
  box-shadow: 0 14px 30px rgba(23,70,90,0.2);
  border: 4px solid rgba(255,255,255,0.9);
  background: rgba(0,0,0,0.05);
}

.avatar-img.loading { opacity: .65; }

.avatar {
  width: 120px;
  height: 120px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(43,182,115,0.12);
  color: #1f8b56;
  font-weight: 700;
  font-size: 40px;
  box-shadow: 0 14px 30px rgba(23,70,90,0.2);
}

.avatar-upload-btn {
  margin-top: .2rem;
  border: 1px solid rgba(31,139,86,0.35);
  background: rgba(43,182,115,0.12);
  color: #1f8b56;
  padding: .4rem 1rem;
  border-radius: 999px;
  font-size: .85rem;
  font-weight: 600;
  cursor: pointer;
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  transition: background .2s ease, transform .2s ease;
}

.avatar-upload-btn:hover { background: rgba(31,139,86,0.2); transform: translateY(-1px); }
.avatar-upload-btn:disabled { opacity: .65; cursor: default; transform: none; }

.profile-meta {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .4rem;
}
.profile-username { font-size: 1.25rem; font-weight: 700; color: rgba(0,0,0,0.82); }
.profile-id { color: rgba(0,0,0,0.52); font-size: .88rem; }
.muted { color: rgba(0,0,0,0.55); }

.profile-divider {
  width: 100%;
  max-width: 780px;
  height: 1px;
  margin: 0 auto 2rem;
  background: linear-gradient(90deg, rgba(32,201,151,0), rgba(32,201,151,0.45), rgba(32,201,151,0));
  opacity: .8;
}

.profile-details { max-width: 860px; margin: 0 auto; width: 100%; }

.details-grid {
  display: grid;
  gap: 1.4rem;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  padding: 0;
  list-style: none;
}

.detail-item--split { grid-column: span 1; }
.detail-item--full { grid-column: span 2; }

.detail-item {
  background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.98));
  border: 1px solid rgba(31,139,86,0.14);
  border-radius: 1.25rem;
  padding: 1.15rem 1.3rem;
  box-shadow: 0 16px 32px rgba(23,70,90,0.08);
  display: flex;
  flex-direction: column;
  gap: .75rem;
  min-height: 100%;
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
}

.detail-item:hover { transform: translateY(-2px); box-shadow: 0 20px 36px rgba(23,70,90,0.12); border-color: rgba(31,139,86,0.22); }

.detail-item dt {
  color: rgba(15,23,42,0.6);
  text-transform: uppercase;
  letter-spacing: .08em;
  font-size: .75rem;
  font-weight: 600;
  margin: 0;
}

.detail-item dd {
  margin: 0;
  color: rgba(15,23,42,0.88);
}

.detail-content {
  display: flex;
  align-items: flex-start;
  justify-content: flex-start;
  gap: .9rem;
  flex-wrap: wrap;
  width: 100%;
}

.detail-content.flex-column { align-items: flex-start; }

.detail-text {
  flex: 1 1 auto;
  min-width: 160px;
  color: rgba(15,23,42,0.78);
}

.detail-actions {
  display: flex;
  gap: .6rem;
  flex-wrap: wrap;
}

.detail-item .detail-actions { margin-top: .75rem; }

.btn-ghost { background: transparent; border-color: rgba(0,0,0,0.15); color: rgba(0,0,0,0.8); }
.btn-ghost:hover { background: rgba(0,0,0,0.03); }
.btn-ghost-primary { border-color: rgba(31,139,86,0.3); color: #1f8b56; }
.btn-ghost-primary:hover { background: rgba(31,139,86,0.06); }
.btn-elevated { box-shadow: 0 4px 10px rgba(31,139,86,0.2); }
.btn-elevated:active { transform: translateY(1px); }
.btn { border-radius: 999px; }
.btn-primary { background: var(--primary-green); border-color: var(--primary-green); }
.btn-primary:hover { background: var(--primary-green-dark); border-color: var(--primary-green-dark); }

.profile-details .btn-xs {
  padding: .35rem .75rem;
  font-size: .8rem;
  border-radius: .9rem;
  letter-spacing: .02em;
  font-weight: 600;
}

.form-control { border-radius: 12px; border-color: rgba(0,0,0,0.1); }
.form-control:focus { box-shadow: 0 0 0 .15rem rgba(43,182,115,.15); border-color: rgba(43,182,115,.45); }

.form-select.city-select { border-radius: 12px; border-color: rgba(0,0,0,0.1); padding-left: 2rem; }
.form-select.city-select:focus { box-shadow: 0 0 0 .15rem rgba(43,182,115,.15); border-color: rgba(43,182,115,.45); }
.city-select-wrapper .city-icon {
  position: absolute;
  left: .65rem;
  top: 50%;
  transform: translateY(-50%);
  color: var(--primary-green-dark, #1f8b56);
  opacity: .8;
}

.city-pill {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .25rem .6rem;
  border-radius: 999px;
  background: rgba(31,139,86,0.08);
  color: #1f8b56;
  border: 1px solid rgba(31,139,86,0.2);
  font-size: .85rem;
}
.city-pill .bi { color: currentColor; opacity: .85; }

.iban-pill { display: inline-block; padding: .25rem .5rem; border-radius: 999px; background: rgba(0,0,0,0.04); }
.iban-pill code { color: #475569; background: transparent; padding: 0; font-weight: 400; }

.pickup-badges { display:flex; flex-wrap:wrap; gap:.4rem; }
.pickup-pill { display:inline-flex; align-items:center; gap:.3rem; padding:.28rem .7rem; border-radius:999px; background:rgba(62,168,168,0.12); border:1px solid rgba(62,168,168,0.3); color:#11626d; font-size:.82rem; font-weight:600; }
.pickup-option-list { display:flex; flex-direction:column; gap:.45rem; margin-bottom:.85rem; }
.pickup-option-list .form-check { margin:0; display:flex; align-items:center; gap:.5rem; }
.pickup-option-list .form-check-input { cursor:pointer; }
.pickup-option-list .form-check-label { cursor:pointer; font-weight:600; color:rgba(15,23,42,0.78); }

.address-preview {
  min-width: 220px;
  flex: 1 1 220px;
  padding: .35rem 0;
  border-radius: 0;
  background: transparent;
  border: none;
}
.address-line { color: rgba(0,0,0,0.75); line-height: 1.4; }

.address-form .form-label { font-weight: 600; color: rgba(0,0,0,0.75); }
.address-form .form-text { font-size: 0.85rem; }
.address-form .form-control.ng-invalid.ng-touched,
.address-form .form-select.ng-invalid.ng-touched { border-color: rgba(211,47,47,0.65); box-shadow: 0 0 0 .1rem rgba(211,47,47,0.12); }

.detail-item .address-form { margin-top: .75rem; }
.detail-item .address-form .btn { margin-top: 0; }
.detail-item .invalid-feedback { display: block; }

.animate-in { animation: fadeInUp .35s ease-out both; }
@keyframes fadeInUp {
  from { opacity: 0; transform: translateY(6px); }
  to { opacity: 1; transform: translateY(0); }
}

@media (max-width: 991.98px) {
  .profile-shell .card-header { flex-direction: column; align-items: flex-start; gap: 1rem; }
  .profile-shell .card-title { font-size: 1.35rem; }
  .profile-hero { margin-top: -2.2rem; }
  .profile-details { max-width: 100%; }
  .details-grid { grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); gap: 1.1rem; }
  .detail-item--split { grid-column: span 1; }
  .detail-item--full { grid-column: span 1; }
}

@media (max-width: 575.98px) {
  .profile-card-body { padding: 2.2rem 1.15rem 2.4rem; }
  .profile-hero { margin-top: -2.1rem; margin-bottom: 1.35rem; }
  .avatar-img,
  .avatar { width: 108px; height: 108px; font-size: 36px; }
  .profile-avatar { padding: 0; }
  .address-preview { width: 100%; }
  .details-grid { grid-template-columns: 1fr; gap: 1rem; }
  .detail-item--split { grid-column: span 1; }
  .detail-item--full { grid-column: span 1; }
}

@media (min-width: 992px) {
  .details-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); }
}
