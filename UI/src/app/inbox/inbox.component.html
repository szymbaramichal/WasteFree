<div class="inbox container py-4">
	<div class="row justify-content-center">
		<div class="col-12 col-lg-10">
			<div class="inbox-card p-3 p-md-4 rounded-4">
			<!-- Simple header -->
			<div class="inbox-header d-flex align-items-center gap-2 mb-3">
				<div class="inbox-icon-wrap d-inline-flex align-items-center justify-content-center">
					<img src="/assets/images/bell.svg" alt="" width="20" height="20" />
				</div>
				<h4 class="m-0">{{ 'inbox.title' | translate }}</h4>
				<div class="ms-auto d-flex align-items-center gap-2" *ngIf="notifications().length">
					<span class="badge bg-primary">{{ notifications().length }}</span>
					<button type="button" class="btn btn-sm btn-outline-secondary" (click)="clearAll()" [disabled]="loading()">
						{{ 'inbox.clearAll' | translate }}
					</button>
				</div>
			</div>

			<!-- Empty state -->
			<div class="text-muted" *ngIf="!notifications().length">
				{{ 'inbox.empty' | translate }}
			</div>

			<!-- Notifications list -->
			<ul class="list-group inbox-list" *ngIf="notifications().length">
				<li class="list-group-item notification-item" *ngFor="let n of notifications(); trackBy: trackById">
					<button type="button" class="btn btn-sm btn-link notification-close" (click)="dismiss(n)" aria-label="Zamknij">&times;</button>
					<div class="d-flex align-items-start gap-3">
						<div class="flex-grow-1">
							<div class="d-flex align-items-center gap-2 mb-1 flex-wrap">
								<strong class="m-0">{{ n.title }}</strong>
								<span class="text-muted small">{{ formatLocalDate(n.createdDateUtc) }}</span>
							</div>
							<p class="mb-0" [innerHTML]="getMessage(n)"></p>
							<div class="notification-actions mt-3">
								<button class="btn btn-sm btn-primary" type="button" (click)="accept(n)">Zaakceptuj</button>
								<button class="btn btn-sm btn-outline-secondary" type="button" (click)="decline(n)">OdrzuÄ‡</button>
							</div>
						</div>
					</div>
				</li>
			</ul>

			<!-- Pagination controls -->
			<div class="inbox-pagination d-flex align-items-center justify-content-between mt-3" *ngIf="(totalPages() ?? 1) > 1">
				<div class="d-flex align-items-center gap-2">
					<button class="btn btn-sm btn-outline-secondary" (click)="prevPage()" [disabled]="pageNumber()<=1">Prev</button>
					<span class="small">Page {{ pageNumber() }} / {{ totalPages() }}</span>
					<button class="btn btn-sm btn-outline-secondary" (click)="nextPage()" [disabled]="pageNumber()>=totalPages()">Next</button>
				</div>
				<div class="d-flex align-items-center gap-2">
					<label class="small text-muted">Page size</label>
					<select class="form-select form-select-sm" style="width:auto" [value]="pageSize()" (change)="setPageSize(+$any($event.target).value)">
						<option value="5">5</option>
						<option value="10">10</option>
						<option value="20">20</option>
						<option value="50">50</option>
					</select>
				</div>
			</div>
			</div>
		</div>
	</div>
</div>
